g_cameraPos はピクセルシェーダで


----- TODO -----------------------------

PlayerとAvatar


地図システムを対応
 + 地図を表示
 + 操作を左スティックと十字キーに変更
 + モノラル時は右スティックでカメラの向き変更
 + 固定の地図内容を表示
 + マップに合わせた地図内容を表示
 + 踏破したブロックの内容が表示されるように対応
 + 自分の位置を示すマーカーを表示
 - 見た目のクオリティアップ
BulletEngine対応
レイキャストで床から情報をとる
レイキャストでモデルのデバッグメニューを表示
2階層目の床に対応
坂道に対応
坂道に沿って移動

魔女を表示
魔女がついてくるようにする
魔女を探索モードのアイコンにする
簡易戦闘を実装

水場に対応
宝箱を実装
魔女で宝箱を開ける
扉に対応
平行光源の影に対応
複数の点光源に対応
天井付の経路に対応
探索モードを仮実装

<優先度低>
カメラを動かしながらWASD移動するとガタガタする(Padではそんなことなかった)
ストリームアウトの対応が必要

パッド移動がなんか酔う・・・?

<ネタ>
上下反転の迷宮
マテリアルの同一判定を高速化してみる

----- DONE ----------------

最後に頂点バッファの生成方法を試してみる
まずは構造体化
次に同一のシェーダーが動くようにしてみる
ここまできてようやく、DirectX9のときの同じ絵が出るはず

生配列から頂点バッファをつくれるようにする
そのあとは、renderFormを解析して、MyFormでもちゃんと動くようにする

blenderから頂点バッファの作成に成功（座標、法線）
ピクセルシェーダを動くようにする
ブレンダーからマテリアルを読み込めるようにする
TGAが読み込めないのをなんとかする(サポートしてないようなのでPNGで回避。将来的にはDDSで)
とりあえずディフューズテクスチャを貼れるようにする
正しいUVで貼れるようにする

法線を描画できるようにする
接線、従法線をBlenderから取得できるようにする（あるいは計算に対応）

ノーマルテクスチャを貼れるようにする
    UVの貼られ方がおかしい様子

法線の表示ON/OFFをデバッグ機能に出す
軸ギズモの表示
UVが反映されないのは何故？
 Tangentが入ったままだったからでした・・・
　Tangentだけの頂点バッファを作って、必要に応じて読み込めるようにする

モデルロード時に座標変換
モデルロード時に四角形ポリゴンを三角形に分割
カメラの平行移動
WASDウォークスルーできるようにする
　カメラリストを実装
　インゲームカメラを仮実装（操作とカメラが混在でよい）
　WASD操作を実装
複数マテリアルの読み込みに対応
モデルに法線マップを適用
点光源によるライティングに対応
プレイヤー位置に点光源をアタッチする

プレイヤー実装
　+ 仮でボックスを表示する
  + InputSystem に render target回りを移動
　+ インゲームカメラから操作の部分を抜き取り、プレイヤーにアタッチさせる
　+ フリーカメラとインゲームカメラの行き来を実装する
  + フリーカメラ時はプレイヤー入力をOFFにする
  + ライトをプレイヤー追従にする

ゲームパッドによるウォークスルーできるようにする
点光源にワールド変換行列が反映されていない
ノーマルマップの謎のシームをなんとかする
  ComputeFaceTangent() のバグだった

  にょきにょきする支柱を実装する
　+ モデルをシーンに表示
  + スケルトンデータを作成する
　+ スケルトンデータを表示する
    + ボーンをデバッグ表示する
	+ デバッグモデルはZバッファ無効化して描画する
	+ ウェイトをデバッグ表示する
　+ プログラム制御でボーンを動かしてアニメーションさせる
  + FPS表示を実装
  + 接空間はピクセルシェーダ内で計算する
　+ アニメデータを作成する
　+ アニメデータを再生する

+ プレイヤーキャラクターを表示する
プレイヤーキャラクターに固定アニメを流す
    + 待機モーション作成
    + キャラ用のマテリアルを生成する
	+ ダミポリ用の三角形を追加
	+ ダミポリをロードできるように対応
	+ ダミポリ位置にカメラをアタッチできるように対応
	+ キャラクターの移動にカメラが付いてくるように対応

+ 移動時に固定アニメを再生する
    + 歩行モーション対応
	+ 歩いている時だけ歩行モーションを流すようにする
	+ 待機モーションとブレンドする
	+ 歩いているときはブレンド率を変える

BoneWeightに0が入っている場合があるのに対応

パッド入力
↓
目標移動ベクトル
↓
停止アニメからアニメ遷移による補正済み移動ベクトル
↓
アニメ再生速度倍率

ブロックを置いて迷路をつくる
配列データからブロックを置いて迷路をつくる
迷路内を進めるようにする
画像データからブロックを置いて迷路をつくる
直進の切れ目がわかるように修正
回転の速度を調整
直進以外の移動に対応（進行方向に回転してから直進）
BlockInfo, BlockAddress を追加
MapFactoryを追加
進めない場所に移動できないように対応
スタート地点対応
鉄格子に対応
FPS表示を常に目の前に
ブロックのインスタンス描画に対応(FPS 250 => 660)
Zソートに対応(FPS 640 => 640?)
フラスタムカリングに対応(何もしないとき 620fps, カリングを空実行 600fps, カリング有効 810fps, Releaseカリング有効1100fps)
 + AABB debug render
 + culling 
  + キャラクターを一度描画しないと何も出てこない
  + カリング範囲がおかしい
  + ステレオの場合は範囲を少し広めにする必要がある
    →必要なさげ？
+ editor camera, ingame camera
+ ソース整理（Detail）
+ 壁のパーツ化に対応(FPS 520)
+ パーツレイアウト.blendを読み込む
+ フロアのパーツ化に対応(FPS520 = >FPS460 => FPS450)
+ マテリアルをクラス化(FPS660)

